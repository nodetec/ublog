<script lang="ts">
  import {
    hidePopup,
    isZapPopupVisible,
    setZapAmount,
    zapOpts,
  } from "~/lib/stores/zaps";

  const PRESET_AMOUNTS = [
    { value: 1000, label: "1k" },
    { value: 5000, label: "5k" },
    { value: 10000, label: "10k" },
    { value: 25000, label: "25k" },
  ];
</script>

{#if $isZapPopupVisible}
  <div id="PopUpMainZap" class="popUpMain">
    <div class="ContainerMain">
      <div class="popUpMainCardWrapper">
        <div class="popUpMainCard popUpMainCardAlt">
          <div class="popUpMainCardTop">
            <div class="popUpMainCardTopInfo">
              <h3>Zap Sats</h3>
            </div>
            <button
              on:click={hidePopup}
              id="ClosePopUpMainRelay-2"
              class="popUpMainCardTopClose"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="-96 0 512 512"
                width="1em"
                height="1em"
                fill="currentColor"
                style="z-index: 1;"
              >
                <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                <path
                  d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"
                ></path>
              </svg>
            </button>
          </div>
          <div class="popUpMainCardBottom">
            <div class="pUMZap">
              <div class="pUMZapElement">
                <label for="pUMZapAmountInput" class="form-label labelMain"
                  >Amount (Satoshis)</label
                ><input
                  class="inputMain"
                  id="pUMZapAmountInput"
                  type="number"
                  min="1"
                  inputmode="numeric"
                  bind:value={$zapOpts.amount}
                />
                <div class="pUMZapElementOptions">
                  {#each PRESET_AMOUNTS as { value, label } (value)}
                    <button
                      on:click={() => setZapAmount(value)}
                      class="pUMZEO"
                      class:active={value === $zapOpts.amount}
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="-64 0 512 512"
                        width="1em"
                        height="1em"
                        fill="currentColor"
                      >
                        <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                        <path
                          d="M240.5 224H352C365.3 224 377.3 232.3 381.1 244.7C386.6 257.2 383.1 271.3 373.1 280.1L117.1 504.1C105.8 513.9 89.27 514.7 77.19 505.9C65.1 497.1 60.7 481.1 66.59 467.4L143.5 288H31.1C18.67 288 6.733 279.7 2.044 267.3C-2.645 254.8 .8944 240.7 10.93 231.9L266.9 7.918C278.2-1.92 294.7-2.669 306.8 6.114C318.9 14.9 323.3 30.87 317.4 44.61L240.5 224z"
                        ></path>
                      </svg>
                      <p>{label}</p>
                    </button>
                  {/each}
                </div>
              </div>
              <div class="pUMZapElement">
                <label for="pUMZapCommentInput" class="form-label labelMain"
                  >Message (optional)</label
                ><input
                  id="pUMZapCommentInput"
                  class="inputMain"
                  type="text"
                  bind:value={$zapOpts.comment}
                />
              </div>
              <button
                on:click={$zapOpts.action}
                class="btn btnMain btnMainZap"
                type="button"
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="-64 0 512 512"
                  width="1em"
                  height="1em"
                  fill="currentColor"
                >
                  <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                  <path
                    d="M240.5 224H352C365.3 224 377.3 232.3 381.1 244.7C386.6 257.2 383.1 271.3 373.1 280.1L117.1 504.1C105.8 513.9 89.27 514.7 77.19 505.9C65.1 497.1 60.7 481.1 66.59 467.4L143.5 288H31.1C18.67 288 6.733 279.7 2.044 267.3C-2.645 254.8 .8944 240.7 10.93 231.9L266.9 7.918C278.2-1.92 294.7-2.669 306.8 6.114C318.9 14.9 323.3 30.87 317.4 44.61L240.5 224z"
                  ></path>
                </svg>Send</button
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{/if}

<style>
  .pUMZap {
    width: 100%;
    display: flex;
    flex-direction: column;
    grid-gap: 15px;
  }

  .pUMZapElement {
    display: flex;
    flex-direction: column;
    grid-gap: 5px;
  }

  .pUMZapElementOptions {
    width: 100%;
    display: flex;
    flex-direction: row;
    grid-gap: 10px;
    margin: 10px 0 0 0;
  }

  .pUMZEO {
    transition: ease 0.4s;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    text-align: center;
    flex-grow: 1;
    padding: 16px;
    grid-gap: 5px;
    color: rgba(255, 255, 255, 0.5);
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    border: none;
    background-color: transparent;
  }

  .pUMZEO.active,
  .pUMZEO:hover {
    transition: ease 0.4s;
    background: rgba(255, 255, 255, 0.1);
    color: yellow;
  }

  .btnMain.btnMainZap:hover {
    transition: ease 0.4s;
    color: yellow;
  }
</style>
