<script lang="ts">
  import { npub } from "~/config";
  import { author } from "~/lib/stores/author";
</script>

{#if $author}
  <div class="HBSS_Author">
    <div class="HBSS_Author_Top">
      <div class="HBSS_Author_Top_Left">
        <div class="HBSS_Author_Top_Left_Inside">
          <div class="HBSS_Author_Top_Left_InsidePic">
            <div class="HBSS_Author_Top_PPWrapper">
              <div
                class="HBSS_Author_Top_PP"
                style="background: url('{$author?.image}') center / cover no-repeat;"
              ></div>
            </div>
          </div>
          <div class="HBSS_Author_Top_Left_InsideDetails">
            <div class="HBSS_Author_TopWrapper">
              <p class="HBSS_Author_Top_Name">
                {#if $author}
                  {$author?.name}
                {/if}
              </p>
              <p class="HBSS_Author_Top_Handle">{$author?.lud16}</p>
            </div>
          </div>
        </div>
        <div class="HBSS_Author_Top_AddressWrapper">
          <div class="HBSS_Author_Top_AddressWrapped">
            <p id="SiteOwnerAddress" class="HBSS_Author_Top_Address">
              {npub}
            </p>
          </div>
          <div class="HBSS_Author_Top_IconWrapper">
            <div id="copySiteOwnerAddress" class="HBSS_Author_Top_IconWrapped">
              <svg
                class="HBSS_Author_Top_Icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 512 512"
                width="1em"
                height="1em"
                fill="currentColor"
              >
                <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                <path
                  d="M384 96L384 0h-112c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48H464c26.51 0 48-21.49 48-48V128h-95.1C398.4 128 384 113.6 384 96zM416 0v96h96L416 0zM192 352V128h-144c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48L288 416h-32C220.7 416 192 387.3 192 352z"
                ></path>
              </svg>
            </div>
            <div
              id="siteOwnerOpenPopUpMainQR"
              class="HBSS_Author_Top_IconWrapped"
            >
              <svg
                class="HBSS_Author_Top_Icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="-32 0 512 512"
                width="1em"
                height="1em"
                fill="currentColor"
              >
                <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                <path
                  d="M144 32C170.5 32 192 53.49 192 80V176C192 202.5 170.5 224 144 224H48C21.49 224 0 202.5 0 176V80C0 53.49 21.49 32 48 32H144zM128 96H64V160H128V96zM144 288C170.5 288 192 309.5 192 336V432C192 458.5 170.5 480 144 480H48C21.49 480 0 458.5 0 432V336C0 309.5 21.49 288 48 288H144zM128 352H64V416H128V352zM256 80C256 53.49 277.5 32 304 32H400C426.5 32 448 53.49 448 80V176C448 202.5 426.5 224 400 224H304C277.5 224 256 202.5 256 176V80zM320 160H384V96H320V160zM352 448H384V480H352V448zM448 480H416V448H448V480zM416 288H448V416H352V384H320V480H256V288H352V320H416V288z"
                ></path>
              </svg>
            </div>
            <a
              class="HBSS_Author_Top_IconWrapped"
              href="https://primal.net/p/{npub}"
              target="_blank"
              ><svg
                class="HBSS_Author_Top_Icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="-32 0 512 512"
                width="1em"
                height="1em"
                fill="currentColor"
              >
                <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                <path
                  d="M256 64C256 46.33 270.3 32 288 32H415.1C415.1 32 415.1 32 415.1 32C420.3 32 424.5 32.86 428.2 34.43C431.1 35.98 435.5 38.27 438.6 41.3C438.6 41.35 438.6 41.4 438.7 41.44C444.9 47.66 447.1 55.78 448 63.9C448 63.94 448 63.97 448 64V192C448 209.7 433.7 224 416 224C398.3 224 384 209.7 384 192V141.3L214.6 310.6C202.1 323.1 181.9 323.1 169.4 310.6C156.9 298.1 156.9 277.9 169.4 265.4L338.7 96H288C270.3 96 256 81.67 256 64V64zM0 128C0 92.65 28.65 64 64 64H160C177.7 64 192 78.33 192 96C192 113.7 177.7 128 160 128H64V416H352V320C352 302.3 366.3 288 384 288C401.7 288 416 302.3 416 320V416C416 451.3 387.3 480 352 480H64C28.65 480 0 451.3 0 416V128z"
                ></path>
              </svg></a
            >
          </div>
        </div>
      </div>
      <div class="HBSS_Author_Top_Details">
        <p class="HBSS_Author_Top_Bio">
          {$author?.about}
        </p>
        <div
          id="OwnerFollowLogin"
          class="HBSS_Author_Top_NostrLinks"
          style="display: flex;"
        >
          <a
            id="followOwnerBtn"
            class="HBSS_Author_Top_NostrLinksLink HBSS_A_T_NLL_HBSSFollow"
            target="_blank"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 -64 640 640"
              width="1em"
              height="1em"
              fill="currentColor"
            >
              <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
              <path
                d="M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3C0 496.5 15.52 512 34.66 512h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM616 200h-48v-48C568 138.8 557.3 128 544 128s-24 10.75-24 24v48h-48C458.8 200 448 210.8 448 224s10.75 24 24 24h48v48C520 309.3 530.8 320 544 320s24-10.75 24-24v-48h48C629.3 248 640 237.3 640 224S629.3 200 616 200z"
              ></path>
            </svg>
            <p>Follow</p>
          </a>
        </div>
      </div>
      <div id="WritersAndAdmin" class="HomeBodySideSec">
        <div class="HBSS_WritersAndAdmin">
          <a id="OpenPopUpMainWrite" class="HBSS_WAA_Btn" href="/write">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              width="1em"
              height="1em"
              fill="currentColor"
            >
              <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
              <path
                d="M467.1 241.1L351.1 288h94.34c-7.711 14.85-16.29 29.28-25.87 43.01l-132.5 52.99h85.65c-59.34 52.71-144.1 80.34-264.5 52.82l-68.13 68.13c-9.38 9.38-24.56 9.374-33.94 0c-9.375-9.375-9.375-24.56 0-33.94l253.4-253.4c4.846-6.275 4.643-15.19-1.113-20.95c-6.25-6.25-16.38-6.25-22.62 0l-168.6 168.6C24.56 58 366.9 8.118 478.9 .0846c18.87-1.354 34.41 14.19 33.05 33.05C508.7 78.53 498.5 161.8 467.1 241.1z"
              ></path>
            </svg>Write</a
          >
        </div>
      </div>
    </div>
  </div>
{:else}
  loading
{/if}

<style>
  .HBSS_Author_Top_Left {
    height: 100%;
    display: flex;
    flex-direction: column;
    grid-gap: 15px;
    align-items: center;
  }

  @media (max-width: 576px) {
    .HBSS_Author_Top_Left {
      height: 100%;
      display: flex;
      flex-direction: column;
      grid-gap: 25px;
      align-items: center;
    }
  }

  /* .HBSS_Author_Top_QR {
    width: 100%;
    border-radius: 10px;
    padding-top: 100%;
    background: rgba(0, 0, 0, 0.1);
  } */

  /* .HBSS_Author_Top_QRWrapper {
    width: 100%;
    height: auto;
    position: relative;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 0 8px 0 rgb(0, 0, 0, 0.1);
    padding: 5px;
    max-width: 250px;
  } */

  /* .HBSS_Author_Top_QRCover {
    transition: ease 0.4s;
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    background: #232323;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: rgba(255, 255, 255, 0.25);
    font-size: 25px;
    opacity: 1;
    height: 100%;
  } */

  /* .HBSS_Author_Top_QRCover:hover,
  focus,
  active {
    transition: ease 0.4s;
    background: #232323;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: rgba(255, 255, 255, 0.25);
    font-size: 25px;
    opacity: 0;
  } */

  .HBSS_Author_Top_Name {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    color: rgba(255, 255, 255, 0.75);
  }

  /* .HBSS_Author_Top_QRCoverIcon {
    width: 100%;
    height: 100%;
    max-width: 35px;
  } */

  /* @media (max-width: 576px) {
    .HBSS_Author_Top_QRCoverIcon {
      width: 100%;
      height: 100%;
      max-width: 125px;
    }
  } */

  .HBSS_Author_Top_PPWrapper {
    background: linear-gradient(
      to bottom right,
      #4b4b4b 00%,
      rgba(35, 35, 35, 0) 50%,
      #4b4b4b 150%
    );
    /*padding: 2px;*/
    border-radius: 12px;
    box-shadow: 0 0 8px 0 rgb(0, 0, 0, 0.1);
  }

  .HBSS_Author_Top {
    display: grid;
    grid-template-columns: 1fr;
    grid-gap: 15px;
    justify-content: start;
    align-items: start;
  }

  @media (max-width: 576px) {
    .HBSS_Author_Top {
      display: grid;
      grid-template-columns: 1fr;
      grid-gap: 15px;
      justify-content: start;
      align-items: start;
    }
  }

  .HBSS_Author_Top_PP {
    border-radius: 10px;
    height: 75px;
    width: 75px;
  }

  .HBSS_Author_Top_Details {
    display: grid;
    grid-template-columns: 1fr;
    grid-gap: 15px;
  }

  .HBSS_Author_Top_NostrLinks {
    display: flex;
    flex-direction: row;
    grid-gap: 10px;
  }

  .HBSS_Author_Top_AddressWrapper {
    display: grid;
    grid-template-columns: 1.75fr 0.75fr;
    grid-gap: 0;
    color: rgba(255, 255, 255, 0.5);
    border-radius: 7px;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.05);
    box-shadow: 0 0 8px 0 rgb(0, 0, 0, 0.1);
  }

  /* .HBSS_Author_Top_Icon {
  } */

  .HBSS_Author_Top_Address {
    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .HBSS_Author_Top_Bio {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
    -webkit-line-clamp: 3;
    font-size: 14px;
    line-height: 1.5;
    color: rgba(255, 255, 255, 0.25);
  }

  .HBSS_Author_Top_NostrLinksLink {
    transition: ease 0.4s;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    color: rgba(255, 255, 255, 0.25);
    text-decoration: unset;
    padding: 15px 15px;
    background: rgba(38, 38, 38, 0);
    border-radius: 10px;
    border: solid 1px rgba(255, 255, 255, 0);
    cursor: pointer;
    position: relative;
    grid-gap: 10px;
    line-height: 1;
  }

  .HBSS_Author_Top_NostrLinksLink:hover {
    transition: ease 0.4s;
    color: rgba(255, 255, 255, 0.75);
    box-shadow: 0 0 8px 0 rgb(0, 0, 0, 0.1);
    border: solid 1px rgba(255, 255, 255, 0);
    transform: scale(1.03);
  }

  .HBSS_Author_Top_NostrLinksLink:active {
    transition: ease 0.1s;
    transform: scale(0.98);
  }

  .HBSS_Author_Top_NostrLinksLink::before {
    transition: ease 0.4s;
    opacity: 0;
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    background: linear-gradient(to top right, #262626, #292929, #262626);
    z-index: -1;
    border-radius: 10px;
  }

  .HBSS_Author_Top_NostrLinksLink:hover::before {
    transition: ease 0.4s;
    opacity: 1;
  }

  /* .HBSS_Author_Top_NostrLinksLinkIcon {
  } */

  /* .HBSS_Author_Top_Handle {
  } */

  .HBSS_Author_Top_NostrLinksLink.HBSS_A_T_NLL_HBSSFollow {
    width: 100%;
    font-weight: bold;
    border: solid 1px rgba(255, 255, 255, 0.1);
  }

  /* .HBSS_Author_Top_NostrLinksLink.HBSS_A_T_NLL_HBSSFollow.HBSS_A_T_NLL_HBSSFActive {
    background: linear-gradient(to top right, #232323, #262626, #232323);
    border: solid 1px rgba(255, 255, 255, 0.05);
  } */

  .HBSS_WritersAndAdmin {
    width: 100%;
    display: flex;
    flex-direction: row;
    grid-gap: 10px;
  }

  .HBSS_WAA_Btn {
    transition: ease 0.4s;
    text-decoration: unset;
    color: rgba(255, 255, 255, 0.25);
    font-weight: bold;
    padding: 10px 20px;
    border-radius: 10px;
    border: solid 1px rgba(255, 255, 255, 0.1);
    width: 100%;
    text-align: center;
    grid-gap: 10px;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    position: relative;
  }

  .HBSS_WAA_Btn:hover {
    transition: ease 0.4s;
    text-decoration: unset;
    color: rgba(255, 255, 255, 0.75);
    box-shadow: 0 0 8px 0 rgb(0, 0, 0, 0.1);
    transform: scale(1.03);
  }

  .HBSS_WAA_Btn::before {
    transition: ease 0.4s;
    opacity: 0;
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    background: linear-gradient(to top right, #262626, #292929, #262626);
    z-index: -1;
    border-radius: 10px;
  }

  .HBSS_WAA_Btn:hover::before {
    transition: ease 0.4s;
    opacity: 1;
  }

  .HBSS_Author_Top_Left_Inside {
    display: flex;
    flex-direction: row;
    grid-gap: 15px;
    width: 100%;
  }

  /* .HBSS_Author_Top_Left_InsidePic {
  } */

  .HBSS_Author_Top_Left_InsideDetails {
    width: 100%;
    display: flex;
    flex-direction: column;
    grid-gap: 5px;
    justify-content: end;
  }

  .HBSS_Author_Top_AddressWrapped {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 5px 10px;
  }

  .HBSS_Author_Top_IconWrapper {
    width: 100%;
    display: flex;
    flex-direction: row;
    grid-gap: 0px;
    background: rgba(255, 255, 255, 0.05);
  }

  .HBSS_Author_TopWrapper {
    width: 100%;
    display: flex;
    flex-direction: column;
  }
</style>
